<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ACME Package Registry</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Hidden API Configuration -->
    <input type="hidden" id="apiBaseUrl" value="">
    <input type="hidden" id="authToken" value="">

    <div class="container">
        <!-- Header -->
        <header class="header">
            <h1>ACME Package Registry</h1>
            <p class="subtitle">Trustworthy Model, Dataset & Code Repository</p>
        </header>

        <!-- Search and Actions Bar -->
        <div class="actions-bar">
            <div class="search-container">
                <input
                    type="text"
                    id="search-input"
                    placeholder="Search by name or ID"
                    class="search-input"
                >
                <button onclick="searchArtifacts()" class="search-btn">Search</button>
            </div>
            <button onclick="showAddArtifactModal()" class="add-btn">+ Add Artifact</button>
        </div>

        <!-- Loading State -->
        <div id="loading" class="loading-state" style="display: none;">
            <div class="spinner"></div>
            <p>Loading artifacts...</p>
        </div>

        <!-- Error State -->
        <div id="error-state" class="error-state" style="display: none;">
            <p id="error-message"></p>
        </div>

        <!-- Empty State -->
        <div id="empty-state" class="empty-state" style="display: none;">
            <h2>No artifacts found</h2>
            <p>Get started by adding your first artifact!</p>
        </div>

        <!-- Artifacts Grid -->
        <div id="artifacts-grid" class="artifacts-grid">
            <!-- Cards will be populated here by JavaScript -->
        </div>

        <!-- Pagination -->
        <div id="pagination" class="pagination" style="display: none;">
            <button onclick="loadPage('prev')" id="prev-btn" class="pagination-btn" disabled>Previous</button>
            <span id="page-info">Page 1</span>
            <button onclick="loadPage('next')" id="next-btn" class="pagination-btn">Next</button>
        </div>
    </div>

    <!-- Add Artifact Modal -->
    <div id="add-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Add New Artifact</h2>
                <button onclick="closeAddModal()" class="close-btn">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="artifact-type">Artifact Type:</label>
                    <select id="artifact-type" class="input-field">
                        <option value="model">Model</option>
                        <option value="dataset">Dataset</option>
                        <option value="code">Code</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="artifact-url">URL:</label>
                    <input
                        type="url"
                        id="artifact-url"
                        class="input-field"
                        placeholder="https://huggingface.co/google-bert/bert-base-uncased"
                    >
                </div>
                <div id="add-error" class="modal-error" style="display: none;"></div>
                <div id="add-success" class="modal-success" style="display: none;"></div>
            </div>
            <div class="modal-footer">
                <button onclick="closeAddModal()" class="btn-secondary">Cancel</button>
                <button onclick="createArtifact()" class="btn-primary" id="submit-btn">Add Artifact</button>
            </div>
        </div>
    </div>

    <!-- Artifact Detail Modal -->
    <div id="detail-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="detail-name">Artifact Details</h2>
                <button onclick="closeDetailModal()" class="close-btn">&times;</button>
            </div>
            <div class="modal-body">
                <div class="detail-row">
                    <span class="detail-label">Type:</span>
                    <span id="detail-type" class="badge"></span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">ID:</span>
                    <span id="detail-id"></span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Version:</span>
                    <span id="detail-version"></span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Source URL:</span>
                    <a id="detail-url" href="#" target="_blank" class="detail-link"></a>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Quality Score:</span>
                    <div class="score-container">
                        <div class="score-bar">
                            <div id="detail-score-fill" class="score-fill"></div>
                        </div>
                        <span id="detail-score-text" class="score-text"></span>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button onclick="closeDetailModal()" class="btn-primary">Close</button>
            </div>
        </div>
    </div>

    <!-- Configuration Modal (for first-time setup) -->
    <div id="config-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>API Configuration</h2>
            </div>
            <div class="modal-body">
                <p>Please configure your API settings to continue.</p>
                <div class="form-group">
                    <label for="config-api-url">API Base URL:</label>
                    <input
                        type="url"
                        id="config-api-url"
                        class="input-field"
                        placeholder="https://your-api-gateway-url.amazonaws.com/Prod"
                    >
                </div>
                <div class="form-group">
                    <label for="config-auth-token">X-Authorization Token (optional):</label>
                    <input
                        type="text"
                        id="config-auth-token"
                        class="input-field"
                        placeholder="bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
                    >
                </div>
            </div>
            <div class="modal-footer">
                <button onclick="saveConfiguration()" class="btn-primary">Save Configuration</button>
            </div>
        </div>
    </div>

    <script src="scripts.js"></script>
</body>
</html>
